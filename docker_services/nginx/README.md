# EDD nginx Configuration

The EDD uses a built-in nginx web server by default. This document describes some of the
configuration options for the server.

## Contents
* [TLS Configuration](#TLS_Config)


## TLS Configuration <a name="#TLS_Config"/>

Out of the box, a self-signed certificate will be auto-generated by the `nginx` container. This will
cause browsers to display certificate warnings listing the connection as untrusted, so these
certificates are only appropriate for evaluation and development purposes.

When launching EDD with the `docker-compose up` command, the environment variable `EDD_HOST_TLS`
set *in the docker client environment* will instruct docker for a location *on the docker daemon*
where TLS files are located. If appropriately named files are present in that location, they will
get copied to a persistent storage location. If the files are not found, and there are no files in
the persistent location, then the container will attempt to generate files. The `nginx` container
will look for the following files:

* `dhparam.pem` should contain primes used as parameters for Diffie-Hellman key exchange. You only
  need to override this file if you want to generate the file with different openssl parameters.
  The default is `openssl dhparam 2048`.
* `certificate.key` should contain the private key for the certificate. This is the key used in the
  CSR sent to your CA.
* `certificate.chained.crt` should contain the chained TLS certificate, including any intermediates
  provided by your CA. If your CA provided a `certificate.crt` and a `bundle.crt`, then build the
  chained version with `cat bundle.crt certificate.crt > certificate.chained.crt`.
* `trustchain.crt` should contain the intermediate and root certificates in the trust chain, for
  use in OCSP certificate stapling, *excluding* your server certificate; this could be your CA root
  certificate, or the bundled intermediate and root certificate.
