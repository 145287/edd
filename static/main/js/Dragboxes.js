// Compiled to JS on: Thu Feb 18 2016 16:47:14  
/// <reference path="typescript-declarations.d.ts" />
// Code for supporting drag-select
var Dragboxes;
(function (Dragboxes) {
    'use strict';
    var globalChecked = null;
    function findAndInitAllTables() {
        $('table.dragboxes').each(function (i, table) { return initTable(table); });
    }
    Dragboxes.findAndInitAllTables = findAndInitAllTables;
    function dragEnd(event) {
        globalChecked = null;
        event.data.table.off('mouseover.dragboxes');
    }
    Dragboxes.dragEnd = dragEnd;
    function dragOver(event) {
        if (globalChecked !== null) {
            $(':checkbox', this).prop('checked', globalChecked).trigger('change');
        }
    }
    Dragboxes.dragOver = dragOver;
    function dragStart(event) {
        var $this = $(this), checkbox, table;
        // ignore mouse events not using the left mouse button
        if (event.which !== 1) {
            return true;
        }
        // mousedown toggles the clicked checkbox value and stores new value in globalChecked
        if (globalChecked === null) {
            // may have clicked label, so go to parent TD and find the checkbox
            checkbox = $this.closest('td').find(':checkbox');
            // have to check for null to prevent double event from clicking label
            checkbox.prop('checked', function (i, value) {
                return (globalChecked = !value);
            }).trigger('change');
        }
        // also attaches mouseover event to all cells in parent table
        table = $this.closest('.dragboxes').on('mouseover.dragboxes', 'td', dragOver);
        // wait for mouse to go up anywhere, then end drag events
        $(document).one('mouseup.dragboxes', { 'table': table }, dragEnd);
        return false;
    }
    Dragboxes.dragStart = dragStart;
    function initTable(table) {
        $(table).filter('.dragboxes')
            .on('mousedown.dragboxes', 'td :checkbox', dragStart)
            .on('mousedown.dragboxes', 'td label', dragStart)
            .on('click.dragboxes', 'td :checkbox', function () { return false; });
    }
    Dragboxes.initTable = initTable;
})(Dragboxes || (Dragboxes = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHJhZ2JveGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL0RyYWdib3hlcy50cyJdLCJuYW1lcyI6WyJEcmFnYm94ZXMiLCJEcmFnYm94ZXMuZmluZEFuZEluaXRBbGxUYWJsZXMiLCJEcmFnYm94ZXMuZHJhZ0VuZCIsIkRyYWdib3hlcy5kcmFnT3ZlciIsIkRyYWdib3hlcy5kcmFnU3RhcnQiLCJEcmFnYm94ZXMuaW5pdFRhYmxlIl0sIm1hcHBpbmdzIjoiQUFBQSxxREFBcUQ7QUFFckQsa0NBQWtDO0FBRWxDLElBQU8sU0FBUyxDQXFEZjtBQXJERCxXQUFPLFNBQVMsRUFBQyxDQUFDO0lBQ2RBLFlBQVlBLENBQUNBO0lBRWJBLElBQUlBLGFBQWFBLEdBQVdBLElBQUlBLENBQUNBO0lBRXBDQTtRQUNDQyxDQUFDQSxDQUFDQSxpQkFBaUJBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQUNBLENBQVFBLEVBQUVBLEtBQWlCQSxJQUFVQSxPQUFBQSxTQUFTQSxDQUFDQSxLQUFLQSxDQUFDQSxFQUFoQkEsQ0FBZ0JBLENBQUNBLENBQUNBO0lBQ25GQSxDQUFDQTtJQUZlRCw4QkFBb0JBLHVCQUVuQ0EsQ0FBQUE7SUFFRUEsaUJBQXdCQSxLQUE0QkE7UUFDaERFLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3JCQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxxQkFBcUJBLENBQUNBLENBQUNBO0lBQ2hEQSxDQUFDQTtJQUhlRixpQkFBT0EsVUFHdEJBLENBQUFBO0lBRURBLGtCQUF5QkEsS0FBNEJBO1FBQ2pERyxFQUFFQSxDQUFDQSxDQUFDQSxhQUFhQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsRUFBRUEsYUFBYUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDMUVBLENBQUNBO0lBQ0xBLENBQUNBO0lBSmVILGtCQUFRQSxXQUl2QkEsQ0FBQUE7SUFFREEsbUJBQTBCQSxLQUE0QkE7UUFDbERJLElBQUlBLEtBQUtBLEdBQVVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLFFBQWdCQSxFQUFFQSxLQUFZQSxDQUFDQTtRQUMzREEsc0RBQXNEQTtRQUN0REEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO1FBQ2hCQSxDQUFDQTtRQUNEQSxxRkFBcUZBO1FBQ3JGQSxFQUFFQSxDQUFDQSxDQUFDQSxhQUFhQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsbUVBQW1FQTtZQUNuRUEsUUFBUUEsR0FBR0EsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0E7WUFDakRBLHFFQUFxRUE7WUFDckVBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLFVBQUNBLENBQVFBLEVBQUVBLEtBQWFBO2dCQUM3Q0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7WUFDcENBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQ3pCQSxDQUFDQTtRQUNEQSw2REFBNkRBO1FBQzdEQSxLQUFLQSxHQUFHQSxLQUFLQSxDQUFDQSxPQUFPQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLENBQUNBO1FBQzlFQSx5REFBeURBO1FBQ3pEQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxtQkFBbUJBLEVBQUVBLEVBQUVBLE9BQU9BLEVBQUVBLEtBQUtBLEVBQUVBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBO1FBQ2xFQSxNQUFNQSxDQUFDQSxLQUFLQSxDQUFDQTtJQUNqQkEsQ0FBQ0E7SUFwQmVKLG1CQUFTQSxZQW9CeEJBLENBQUFBO0lBSURBLG1CQUEwQkEsS0FBVUE7UUFDaENLLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBO2FBRXhCQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLGNBQWNBLEVBQUVBLFNBQVNBLENBQUNBO2FBRXBEQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLFVBQVVBLEVBQUVBLFNBQVNBLENBQUNBO2FBRWhEQSxFQUFFQSxDQUFDQSxpQkFBaUJBLEVBQUVBLGNBQWNBLEVBQUVBLGNBQWNBLE9BQUFBLEtBQUtBLEVBQUxBLENBQUtBLENBQUNBLENBQUNBO0lBQ3BFQSxDQUFDQTtJQVJlTCxtQkFBU0EsWUFReEJBLENBQUFBO0FBQ0xBLENBQUNBLEVBckRNLFNBQVMsS0FBVCxTQUFTLFFBcURmIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cInR5cGVzY3JpcHQtZGVjbGFyYXRpb25zLmQudHNcIiAvPlxuXG4vLyBDb2RlIGZvciBzdXBwb3J0aW5nIGRyYWctc2VsZWN0XG5cbm1vZHVsZSBEcmFnYm94ZXMge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBnbG9iYWxDaGVja2VkOmJvb2xlYW4gPSBudWxsO1xuXG5cdGV4cG9ydCBmdW5jdGlvbiBmaW5kQW5kSW5pdEFsbFRhYmxlcygpOnZvaWQge1xuXHRcdCQoJ3RhYmxlLmRyYWdib3hlcycpLmVhY2goKGk6bnVtYmVyLCB0YWJsZTpIVE1MRWxlbWVudCk6dm9pZCA9PiBpbml0VGFibGUodGFibGUpKTtcblx0fVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRyYWdFbmQoZXZlbnQ6SlF1ZXJ5TW91c2VFdmVudE9iamVjdCk6dm9pZCB7XG4gICAgICAgIGdsb2JhbENoZWNrZWQgPSBudWxsO1xuICAgICAgICBldmVudC5kYXRhLnRhYmxlLm9mZignbW91c2VvdmVyLmRyYWdib3hlcycpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkcmFnT3ZlcihldmVudDpKUXVlcnlNb3VzZUV2ZW50T2JqZWN0KTp2b2lkIHtcbiAgICAgICAgaWYgKGdsb2JhbENoZWNrZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICQoJzpjaGVja2JveCcsIHRoaXMpLnByb3AoJ2NoZWNrZWQnLCBnbG9iYWxDaGVja2VkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkcmFnU3RhcnQoZXZlbnQ6SlF1ZXJ5TW91c2VFdmVudE9iamVjdCk6Ym9vbGVhbiB7XG4gICAgICAgIHZhciAkdGhpczpKUXVlcnkgPSAkKHRoaXMpLCBjaGVja2JveDogSlF1ZXJ5LCB0YWJsZTpKUXVlcnk7XG4gICAgICAgIC8vIGlnbm9yZSBtb3VzZSBldmVudHMgbm90IHVzaW5nIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvblxuICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1vdXNlZG93biB0b2dnbGVzIHRoZSBjbGlja2VkIGNoZWNrYm94IHZhbHVlIGFuZCBzdG9yZXMgbmV3IHZhbHVlIGluIGdsb2JhbENoZWNrZWRcbiAgICAgICAgaWYgKGdsb2JhbENoZWNrZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIG1heSBoYXZlIGNsaWNrZWQgbGFiZWwsIHNvIGdvIHRvIHBhcmVudCBURCBhbmQgZmluZCB0aGUgY2hlY2tib3hcbiAgICAgICAgICAgIGNoZWNrYm94ID0gJHRoaXMuY2xvc2VzdCgndGQnKS5maW5kKCc6Y2hlY2tib3gnKTtcbiAgICAgICAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZm9yIG51bGwgdG8gcHJldmVudCBkb3VibGUgZXZlbnQgZnJvbSBjbGlja2luZyBsYWJlbFxuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIChpOm51bWJlciwgdmFsdWU6Ym9vbGVhbik6Ym9vbGVhbiA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChnbG9iYWxDaGVja2VkID0gIXZhbHVlKTtcbiAgICAgICAgICAgIH0pLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFsc28gYXR0YWNoZXMgbW91c2VvdmVyIGV2ZW50IHRvIGFsbCBjZWxscyBpbiBwYXJlbnQgdGFibGVcbiAgICAgICAgdGFibGUgPSAkdGhpcy5jbG9zZXN0KCcuZHJhZ2JveGVzJykub24oJ21vdXNlb3Zlci5kcmFnYm94ZXMnLCAndGQnLCBkcmFnT3Zlcik7XG4gICAgICAgIC8vIHdhaXQgZm9yIG1vdXNlIHRvIGdvIHVwIGFueXdoZXJlLCB0aGVuIGVuZCBkcmFnIGV2ZW50c1xuICAgICAgICAkKGRvY3VtZW50KS5vbmUoJ21vdXNldXAuZHJhZ2JveGVzJywgeyAndGFibGUnOiB0YWJsZSB9LCBkcmFnRW5kKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0VGFibGUodGFibGU6IEpRdWVyeSk7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRUYWJsZSh0YWJsZTogSFRNTEVsZW1lbnQpO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0VGFibGUodGFibGU6IGFueSk6dm9pZCB7XG4gICAgICAgICQodGFibGUpLmZpbHRlcignLmRyYWdib3hlcycpXG4gICAgICAgICAgICAvLyB3YXRjaCBmb3IgbW91c2Vkb3duIG9uIGNoZWNrYm94ZXNcbiAgICAgICAgICAgIC5vbignbW91c2Vkb3duLmRyYWdib3hlcycsICd0ZCA6Y2hlY2tib3gnLCBkcmFnU3RhcnQpXG4gICAgICAgICAgICAvLyBhbHNvIHdhdGNoIGZvciBtb3VzZWRvd24gb24gbGFiZWxzXG4gICAgICAgICAgICAub24oJ21vdXNlZG93bi5kcmFnYm94ZXMnLCAndGQgbGFiZWwnLCBkcmFnU3RhcnQpXG4gICAgICAgICAgICAvLyBkaXNhYmxlIGNsaWNrIGJlY2F1c2UgbW91c2Vkb3duIGlzIGhhbmRsaW5nIGl0IG5vd1xuICAgICAgICAgICAgLm9uKCdjbGljay5kcmFnYm94ZXMnLCAndGQgOmNoZWNrYm94JywgKCk6Ym9vbGVhbiA9PiBmYWxzZSk7XG4gICAgfVxufVxuIl19