// Compiled to JS on: Mon Jan 25 2016 15:20:56  
/// <reference path="typescript-declarations.d.ts" />
// Code for supporting drag-select
var Dragboxes;
(function (Dragboxes) {
    'use strict';
    var globalChecked = null;
    function findAndInitAllTables() {
        $('table.dragboxes').each(function (i, table) { return initTable(table); });
    }
    Dragboxes.findAndInitAllTables = findAndInitAllTables;
    function dragEnd(event) {
        globalChecked = null;
        event.data.table.off('mouseover.dragboxes');
    }
    Dragboxes.dragEnd = dragEnd;
    function dragOver(event) {
        if (globalChecked !== null) {
            $(':checkbox', this).prop('checked', globalChecked).trigger('change');
        }
    }
    Dragboxes.dragOver = dragOver;
    function dragStart(event) {
        var $this = $(this), checkbox, table;
        // ignore mouse events not using the left mouse button
        if (event.which !== 1) {
            return true;
        }
        // mousedown toggles the clicked checkbox value and stores new value in globalChecked
        if (globalChecked === null) {
            // may have clicked label, so go to parent TD and find the checkbox
            checkbox = $this.closest('td').find(':checkbox');
            // have to check for null to prevent double event from clicking label
            checkbox.prop('checked', function (i, value) {
                return (globalChecked = !value);
            }).trigger('change');
        }
        // also attaches mouseover event to all cells in parent table
        table = $this.closest('.dragboxes').on('mouseover.dragboxes', 'td', dragOver);
        // wait for mouse to go up anywhere, then end drag events
        $(document).one('mouseup.dragboxes', { 'table': table }, dragEnd);
        return false;
    }
    Dragboxes.dragStart = dragStart;
    function initTable(table) {
        $(table).filter('.dragboxes')
            .on('mousedown.dragboxes', 'td :checkbox', dragStart)
            .on('mousedown.dragboxes', 'td label', dragStart)
            .on('click.dragboxes', 'td :checkbox', function () { return false; });
    }
    Dragboxes.initTable = initTable;
})(Dragboxes || (Dragboxes = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHJhZ2JveGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRHJhZ2JveGVzLnRzIl0sIm5hbWVzIjpbIkRyYWdib3hlcyIsIkRyYWdib3hlcy5maW5kQW5kSW5pdEFsbFRhYmxlcyIsIkRyYWdib3hlcy5kcmFnRW5kIiwiRHJhZ2JveGVzLmRyYWdPdmVyIiwiRHJhZ2JveGVzLmRyYWdTdGFydCIsIkRyYWdib3hlcy5pbml0VGFibGUiXSwibWFwcGluZ3MiOiJBQUFBLGdEQUFnRDtBQUNoRCxxREFBcUQ7QUFFckQsa0NBQWtDO0FBRWxDLElBQU8sU0FBUyxDQXFEZjtBQXJERCxXQUFPLFNBQVMsRUFBQyxDQUFDO0lBQ2RBLFlBQVlBLENBQUNBO0lBRWJBLElBQUlBLGFBQWFBLEdBQVdBLElBQUlBLENBQUNBO0lBRXBDQTtRQUNDQyxDQUFDQSxDQUFDQSxpQkFBaUJBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFVBQUNBLENBQVFBLEVBQUVBLEtBQWlCQSxJQUFVQSxPQUFBQSxTQUFTQSxDQUFDQSxLQUFLQSxDQUFDQSxFQUFoQkEsQ0FBZ0JBLENBQUNBLENBQUNBO0lBQ25GQSxDQUFDQTtJQUZlRCw4QkFBb0JBLHVCQUVuQ0EsQ0FBQUE7SUFFRUEsaUJBQXdCQSxLQUE0QkE7UUFDaERFLGFBQWFBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3JCQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxxQkFBcUJBLENBQUNBLENBQUNBO0lBQ2hEQSxDQUFDQTtJQUhlRixpQkFBT0EsVUFHdEJBLENBQUFBO0lBRURBLGtCQUF5QkEsS0FBNEJBO1FBQ2pERyxFQUFFQSxDQUFDQSxDQUFDQSxhQUFhQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsQ0FBQ0EsQ0FBQ0EsV0FBV0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsRUFBRUEsYUFBYUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7UUFDMUVBLENBQUNBO0lBQ0xBLENBQUNBO0lBSmVILGtCQUFRQSxXQUl2QkEsQ0FBQUE7SUFFREEsbUJBQTBCQSxLQUE0QkE7UUFDbERJLElBQUlBLEtBQUtBLEdBQVVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLFFBQWdCQSxFQUFFQSxLQUFZQSxDQUFDQTtRQUMzREEsc0RBQXNEQTtRQUN0REEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsS0FBS0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDcEJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO1FBQ2hCQSxDQUFDQTtRQUNEQSxxRkFBcUZBO1FBQ3JGQSxFQUFFQSxDQUFDQSxDQUFDQSxhQUFhQSxLQUFLQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUN6QkEsbUVBQW1FQTtZQUNuRUEsUUFBUUEsR0FBR0EsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0E7WUFDakRBLHFFQUFxRUE7WUFDckVBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLFVBQUNBLENBQVFBLEVBQUVBLEtBQWFBO2dCQUM3Q0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsYUFBYUEsR0FBR0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0E7WUFDcENBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQ3pCQSxDQUFDQTtRQUNEQSw2REFBNkRBO1FBQzdEQSxLQUFLQSxHQUFHQSxLQUFLQSxDQUFDQSxPQUFPQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLENBQUNBLENBQUNBO1FBQzlFQSx5REFBeURBO1FBQ3pEQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxtQkFBbUJBLEVBQUVBLEVBQUVBLE9BQU9BLEVBQUVBLEtBQUtBLEVBQUVBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBO1FBQ2xFQSxNQUFNQSxDQUFDQSxLQUFLQSxDQUFDQTtJQUNqQkEsQ0FBQ0E7SUFwQmVKLG1CQUFTQSxZQW9CeEJBLENBQUFBO0lBSURBLG1CQUEwQkEsS0FBVUE7UUFDaENLLENBQUNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBO2FBRXhCQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLGNBQWNBLEVBQUVBLFNBQVNBLENBQUNBO2FBRXBEQSxFQUFFQSxDQUFDQSxxQkFBcUJBLEVBQUVBLFVBQVVBLEVBQUVBLFNBQVNBLENBQUNBO2FBRWhEQSxFQUFFQSxDQUFDQSxpQkFBaUJBLEVBQUVBLGNBQWNBLEVBQUVBLGNBQWNBLE9BQUFBLEtBQUtBLEVBQUxBLENBQUtBLENBQUNBLENBQUNBO0lBQ3BFQSxDQUFDQTtJQVJlTCxtQkFBU0EsWUFReEJBLENBQUFBO0FBQ0xBLENBQUNBLEVBckRNLFNBQVMsS0FBVCxTQUFTLFFBcURmIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29tcGlsZWQgdG8gSlMgb246IE1vbiBKYW4gMjUgMjAxNiAxNToyMDo1NiAgXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwidHlwZXNjcmlwdC1kZWNsYXJhdGlvbnMuZC50c1wiIC8+XG5cbi8vIENvZGUgZm9yIHN1cHBvcnRpbmcgZHJhZy1zZWxlY3RcblxubW9kdWxlIERyYWdib3hlcyB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGdsb2JhbENoZWNrZWQ6Ym9vbGVhbiA9IG51bGw7XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGZpbmRBbmRJbml0QWxsVGFibGVzKCk6dm9pZCB7XG5cdFx0JCgndGFibGUuZHJhZ2JveGVzJykuZWFjaCgoaTpudW1iZXIsIHRhYmxlOkhUTUxFbGVtZW50KTp2b2lkID0+IGluaXRUYWJsZSh0YWJsZSkpO1xuXHR9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZHJhZ0VuZChldmVudDpKUXVlcnlNb3VzZUV2ZW50T2JqZWN0KTp2b2lkIHtcbiAgICAgICAgZ2xvYmFsQ2hlY2tlZCA9IG51bGw7XG4gICAgICAgIGV2ZW50LmRhdGEudGFibGUub2ZmKCdtb3VzZW92ZXIuZHJhZ2JveGVzJyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRyYWdPdmVyKGV2ZW50OkpRdWVyeU1vdXNlRXZlbnRPYmplY3QpOnZvaWQge1xuICAgICAgICBpZiAoZ2xvYmFsQ2hlY2tlZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgJCgnOmNoZWNrYm94JywgdGhpcykucHJvcCgnY2hlY2tlZCcsIGdsb2JhbENoZWNrZWQpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRyYWdTdGFydChldmVudDpKUXVlcnlNb3VzZUV2ZW50T2JqZWN0KTpib29sZWFuIHtcbiAgICAgICAgdmFyICR0aGlzOkpRdWVyeSA9ICQodGhpcyksIGNoZWNrYm94OiBKUXVlcnksIHRhYmxlOkpRdWVyeTtcbiAgICAgICAgLy8gaWdub3JlIG1vdXNlIGV2ZW50cyBub3QgdXNpbmcgdGhlIGxlZnQgbW91c2UgYnV0dG9uXG4gICAgICAgIGlmIChldmVudC53aGljaCAhPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbW91c2Vkb3duIHRvZ2dsZXMgdGhlIGNsaWNrZWQgY2hlY2tib3ggdmFsdWUgYW5kIHN0b3JlcyBuZXcgdmFsdWUgaW4gZ2xvYmFsQ2hlY2tlZFxuICAgICAgICBpZiAoZ2xvYmFsQ2hlY2tlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gbWF5IGhhdmUgY2xpY2tlZCBsYWJlbCwgc28gZ28gdG8gcGFyZW50IFREIGFuZCBmaW5kIHRoZSBjaGVja2JveFxuICAgICAgICAgICAgY2hlY2tib3ggPSAkdGhpcy5jbG9zZXN0KCd0ZCcpLmZpbmQoJzpjaGVja2JveCcpO1xuICAgICAgICAgICAgLy8gaGF2ZSB0byBjaGVjayBmb3IgbnVsbCB0byBwcmV2ZW50IGRvdWJsZSBldmVudCBmcm9tIGNsaWNraW5nIGxhYmVsXG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgKGk6bnVtYmVyLCB2YWx1ZTpib29sZWFuKTpib29sZWFuID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGdsb2JhbENoZWNrZWQgPSAhdmFsdWUpO1xuICAgICAgICAgICAgfSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWxzbyBhdHRhY2hlcyBtb3VzZW92ZXIgZXZlbnQgdG8gYWxsIGNlbGxzIGluIHBhcmVudCB0YWJsZVxuICAgICAgICB0YWJsZSA9ICR0aGlzLmNsb3Nlc3QoJy5kcmFnYm94ZXMnKS5vbignbW91c2VvdmVyLmRyYWdib3hlcycsICd0ZCcsIGRyYWdPdmVyKTtcbiAgICAgICAgLy8gd2FpdCBmb3IgbW91c2UgdG8gZ28gdXAgYW55d2hlcmUsIHRoZW4gZW5kIGRyYWcgZXZlbnRzXG4gICAgICAgICQoZG9jdW1lbnQpLm9uZSgnbW91c2V1cC5kcmFnYm94ZXMnLCB7ICd0YWJsZSc6IHRhYmxlIH0sIGRyYWdFbmQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRUYWJsZSh0YWJsZTogSlF1ZXJ5KTtcbiAgICBleHBvcnQgZnVuY3Rpb24gaW5pdFRhYmxlKHRhYmxlOiBIVE1MRWxlbWVudCk7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRUYWJsZSh0YWJsZTogYW55KTp2b2lkIHtcbiAgICAgICAgJCh0YWJsZSkuZmlsdGVyKCcuZHJhZ2JveGVzJylcbiAgICAgICAgICAgIC8vIHdhdGNoIGZvciBtb3VzZWRvd24gb24gY2hlY2tib3hlc1xuICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24uZHJhZ2JveGVzJywgJ3RkIDpjaGVja2JveCcsIGRyYWdTdGFydClcbiAgICAgICAgICAgIC8vIGFsc28gd2F0Y2ggZm9yIG1vdXNlZG93biBvbiBsYWJlbHNcbiAgICAgICAgICAgIC5vbignbW91c2Vkb3duLmRyYWdib3hlcycsICd0ZCBsYWJlbCcsIGRyYWdTdGFydClcbiAgICAgICAgICAgIC8vIGRpc2FibGUgY2xpY2sgYmVjYXVzZSBtb3VzZWRvd24gaXMgaGFuZGxpbmcgaXQgbm93XG4gICAgICAgICAgICAub24oJ2NsaWNrLmRyYWdib3hlcycsICd0ZCA6Y2hlY2tib3gnLCAoKTpib29sZWFuID0+IGZhbHNlKTtcbiAgICB9XG59XG4iXX0=