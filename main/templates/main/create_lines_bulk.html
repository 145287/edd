{% extends "main/study.html" %}
{% load staticfiles %}

{% block js_css %}
    {{ block.super }}
    <!-- TODO: template-ize script / stylesheet references -->
    <link rel="stylesheet" type="text/css" href="{% static 'main/create_lines_bulk.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'main/js/lib/jquery-ui/jquery-ui.min.css' %}"/>
    <script type="text/javascript" src="{% static 'main/js/lib/jquery-ui/jquery-ui.min.js' %}"></script>
    <script src="{% static 'main/js/EDDAutocomplete.js' %}"></script>
    <script src="{% static 'main/js/CreateLines.js' %}"></script>
{% endblock js_css %}

{% block head_title %}
    Create lines for study "{{ study.name }}"
{% endblock head_title %}

{% block body_title %}
    <h1>Bulk Line Creation for <a href="/study/{{ study.id }}">{{ study.name }}</a></h1>
{% endblock body_title %}
{% block content %}
<div id="dialog-confirm" title="Add Line Property">
    <p>Which type of line data do you want to add?</p>
    <input id="line-metadata-text" type="text" eddautocompletetype="LineMetadataType"/>
    <input id="line-metadata-value" type="hidden"/>
  <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span></p>
</div>
<h1>Create lines for <a href="/study/{{ study.id }}">{{ study.name }}</a></h1>
    <!-- Step 1 -->
    <div class="pageSection" id="select_input_source_step">
        <div class="sectionHead">Step 1: Choose the source(s) for line definitions:</div>
            <div class="sectionContent">
                <ul id="step1_list">
                    <li>
                        <input type="radio" name="input_source" id="manual_input_btn"
                       class="property_radio" checked="checked" />
                <label for="manual_input_btn">Manual input only (see Step 2)</label>
                    </li>
                    <li>
                        <input type="radio" name="input_source" id="spreadsheet_btn"
                       class="property_radio" disabled="disabled"/>
                <label for="spreadsheet_btn">Spreadsheet</label>
                    </li>
                    <li>
                         <input type="radio" name="input_source" id="ice_collection_btn"
                                class="property_radio" disabled="disabled"/>
                <label for="ice_collection_btn" >ICE collection</label>
                        <input type="text" name="ice_collection" class="autocomplete" disabled="disabled">
                    </li>
                </ul>
            </div>
    </div>
    <!-- Step 2 (Dynamic) -->
    <div class="pageSection" id="select_line_properties_step_dynamic">
        <div class="sectionHead">Step 2: Choose properties to apply to each new line:</div>
        <div class="sectionContent">
            <div class="step2_table_heading">
                <div class="step2_table_cell">
                    <label>Property</label>
                    <button id="addPropertyButton" class="addButton"><span class="ui-icon ui-icon-plusthick"></span></button>
                </div>
                <div class="step2_table_cell"><!--empty for value input--></div>
                <div class="step2_table_cell"><!--empty for add button column--></div>
                <div class="step2_table_cell">
                    <label>Apply to<br> All Lines</label>
                </div>
                <div class="step2_table_cell">
                    <label>Make <br>Combinations</label>
                </div>
            </div>
        </div>
    </div>
    <!-- Step 3 -->
    <div class="pageSection" id="choose_line_names_step">
        <div class="sectionHead">Step 3: Choose the order of identifying data in line
            names:</div>
        <div class="sectionContent">
            <div id="line_naming_summary"> <label>Sample Line Name: </label></div>
            <div class="step2-table" id="name_ordering_table">
                <div class="step2_table_heading">
                    <div class="step2_table_cell"><label>Ordering:</label></div>
                    <div class="step2_table_cell"></div>
                </div>
                <div class="row">
                    <div class="step2_table_cell subsection"><label>Line Name Elements:</label></div>
                    <div class="step2_table_cell subsection"><label>Unused Elements:</label></div>
                </div>
                <div class="row">
                    <!-- Line Name Elements List -->
                    <div class="step2_table_cell name_elt_cell">
                        <div>
                            <ul id="line_name_elts" class="connectedSortable"></ul>
                        </div>
                    </div>
                    <!-- Unused Elements List -->
                    <div class="step2_table_cell name_elt_cell">
                        <div>
                            <ul id="unused_line_name_elts" class="connectedSortable"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="step2-table" id="name_customization_table">
                <div class="step2_table_heading">
                    <div class="step2_table_cell"><label>Custom Name Elements:</label></div>
                    <div class="step2_table_cell"><button name="add_custom_label">+</button></div>
                    <div class="step2_table_cell"><label>Abbreviations:</label></div>
                    <div class="step2_table_cell"><button name="add_abbreviation">+</button></div>
                </div>
                <div class="row">
                    <div class="step2_table_cell"><label>Label</label></div>
                    <div class="step2_table_cell"><label>Value</label></div>
                    <div class="step2_table_cell"><label>Element</label></div>
                    <div class="step2_table_cell"><label>Value</label></div>
                    <div class="step2_table_cell"><label>Abbreviation</label></div>
                </div>
                <div class="step2_table_cell"><input type="text" name="lbl_descriptor_1"
                                                     value="Experimental
                                                Platform"/></div>
                <div class="step2_table_cell">
                    <input type="text" name="lbl_value_1" value="BioHector">
                    <button name="delete_lbl_1">-</button></div>
                <div class="step2_table_cell"><input type="text" name="abbrev_elt_1" value="Strain Name"/></div>
                <div class="step2_table_cell"><input type="text" name="abbrev_value_1"
                                                     value="JW1058"/></div>
                <div class="step2_table_cell"><input type="text" name="abbrev_text_1"
                                                     value="58"/><button
                        name="remove_abbreviation">-</button></div>
            </div>
        </div>
    </div>

    <div class="pageSection" id="review_step">
            <div class="sectionHead">Step 4: Review line creation summary</div>
            <div class="sectionContent">
                <div id="indicator"></div>
                <textarea id="jsonTest"/>
                <div class="step2-table">
                    <div class="row">
                        <div class="step2_table_cell"><label>Total lines to be created</label></div>
                        <div class="step2_table_cell"><label>24</label></div>
                    </div>
                    <div class="row">
                        <div class="step2_table_cell"><label>Other important stats (e.g. # variations /
                            metadata type)</label></div>
                        <div class="step2_table_cell"><label>TBD</label></div>
                    </div>
                    <div class="row">
                        <div class="step2_table_cell"><label>Sample Line Names</label></div>
                        <div class="step2_table_cell"><label>Blah</label></div>
                    </div>

                    </div>
                <input type="hidden" id="jsonoutput" name="jsonoutput" />
                <input type="hidden" name="studyID" value="{{ study.id }}"/>
                <button disabled="disabled">Create 24 Lines...</button>
                <button disabled="disabled">Create Spreadsheet</button>
                <button disabled="disabled">Save As Template</button>
                </div>
    </div>
{% endblock content %}