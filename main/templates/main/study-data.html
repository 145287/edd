{% extends "main/study.html" %}
{% load staticfiles %}

{% block js_css %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'main/js/lib/underscore/underscore.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/lib/d3/d3.v2.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/lib/d3/d3.tip.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/DataGrid.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/GraphHelperMethods.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/StudyGraphing.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/StudyGraphingHelperMethods.js'%}"></script>
    <script type="text/javascript" src="{% static 'main/js/StudySBMLExport.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/createMultiAxisLine.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/groupedBarMeasurement.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/lineGraphHelperMethods.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/barGraphHelperMethods.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/js/Study-Data.js' %}"></script>
{% endblock js_css %}

{% block head_title %}
    {{ block.super }}
{% endblock head_title %}

{% block body_title %}
    {{ block.super }}
{% endblock body_title %}

{% block content %}
    {{ block.super }}

<!--
<div style="display:table;">
    <div style="display:table-row;">
        <div style="display:table-cell;">

            <div class="buttonBar">
                <span id="dataTableButton">
                    <img src="{% static 'main/images/study-data-icon-chart.png' %}" width="18" height="18" />
                </span><span class="active" id="lineGraphButton">
                    <img src="{% static 'main/images/study-data-icon-lines.png' %}" width="18" height="18" />
                </span><span id="barGraphButton">
                    <img src="{% static 'main/images/study-data-icon-bars.png' %}" width="18" height="18" />
                </span>
            </div>

        </div>
        <div style="display:table-cell;">

            <div class="buttonBar">
                <span id="" class="active">
                    Time
                </span><span id="">
                    Line
                </span><span id="">
                    Measurement
                </span>
            </div>

        </div>
    </div>
</div>
-->
    <ul class="nav nav-tabs studyTabs">
      <li id="studyGraph" role="presentation" class="active"><a href="#">Graph</a></li>
      <li id="studyTable" role="presentation" class="disabled"><a href="#">Table</a></li>
    </ul>

    <div class="pageSection pageSectionTabContent" id="overviewSection">
        <div class="sectionContent">
            <div class="btn-toolbar">
                <div class="btn-group" data-toggle="buttons" id="chartType">
                    <label class="btn btn-default btn-sm active line">
                        <input value="linechart" type="radio" autocomplete="off" checked />
                        <img src="{% static 'main/images/chart_curve.png' %}" />
                    </label>
                    <label class="btn btn-default btn-sm" style="margin-right: 20px;">
                        <input type="radio" autocomplete="off" />
                        <img src="{% static 'main/images/chart_bar.png' %}" />
                    </label>
                    <label class="btn btn-default btn-sm groupByTimeBar hidden">
                        <input value="timeBar" type="radio" autocomplete="off" />Time
                    </label>
                    <label class="btn btn-default btn-sm groupByProteinBar hidden">
                        <input type="radio" autocomplete="off" value="barAssay" />Line
                    </label>
                    <label class="btn btn-default btn-sm groupByMeasurementBar hidden">
                        <input type="radio" value="groupedMeasurement" autocomplete="off" />Measurement
                    </label>
                </div>
            </div>
        </div>
        <div class="linechart">
            <div class="lineNoData">No data selected - please filter</div>
            <div style="display:none" class="checkbox y-checkbox">
                <label><input type="checkbox" value="" />hide y-axis</label>
            </div>
        </div>
        <div class="barTime">
            <div style="display:none" class="checkbox y-checkbox">
                <label><input type="checkbox" value="" />hide y-axis</label>
            </div>
        </div>
        <div class="barAssay">
            <div style="display:none" class="checkbox y-checkbox">
                <label><input type="checkbox" value="" />hide y-axis</label>
            </div>
        </div>
        <div class="barMeasurement">
            <div class="checkbox y-checkbox" style="display:none">
                <label><input type="checkbox" value="" />hide y-axis</label>
            </div>
        </div>
         <div class="blankSvg">
            <img id="loadingDiv" src="{% static 'main/images/spinner-big.gif' %}" class="spinner"/>
        </div>
        <div id="maingraph" class="graphContainer"></div>
    </div>

<form action="" class="assay-action" method="POST">
    {% csrf_token %}

    <table class="pageSection scroll" id="assaysSection" style="display:none">
    <span id="showAll" style="display:none">
        <input id="showNoMeasurements"type="button" value="Show all" class="tableControl">
        <div style="float:none; margin: 10px 5px 10px 0px;"class="helpBadgeDiv">help
            <div class="helpContent">
                <p>Click show all to show lines and measurements that do not have measurements. NOTE: this will clear
                    out the filtering section below. The filtering section only filters lines and assays with measurements.
                </p>
            </div>
        </div>
        <span>
            <input id="disabledOptions" type="button" value="Show disabled" class="tableControl">
        </span>
    </span>

        <!-- individual protocol assay sections inserted here -->
        <div id="assaysActionPanel" class="sectionActions off">
            <div class="assay-section">
            </div>
            <span id="assaysSelectedCell">0 selected</span>
            {% if writable %}
            <input id="assay_action_mark" type="radio" name="assay_action" value="mark" />
            <label for="assay_action_mark">
                <span>Mark as</span>
                <select name="disable">
                    <option value="true">Disabled</option>
                    <option value="false">Enabled</option>
                </select>
            </label>
            <input id="assay_action_delete" type="radio" name="assay_action" value="delete" />
            <label for="assay_action_delete">Delete Measurements</label>
            <input id="assay_action_edit" type="radio" name="assay_action" value="edit" />
            <label for="assay_action_edit">Edit Measurements</label>
            <input id="assay_action_export" type="radio" name="assay_action" value="export" />
            {% else %}
            <input id="assay_action_export" type="hidden" name="assay_action" value="export" />
            {% endif %}
            <label for="assay_action_export">Export Data</label>
            <button name="action" type="submit" value="assay_action">Take Action</button>
            <div class="clear"></div>
        </div>
    </table>
    <div class="sectionChapter" id="graphFilter">
        <span class="tableControl" id="pointsDisplayedSpan"></span>
        </br>
        <div>
    <span>Filter measurements</span>
    <div style="float:none; margin-left:15px"class="helpBadgeDiv">help
        <div class="helpContent">
            <p>Click filters below to filter lines or assays that have measurements. Click show all on the table
                tab to show lines and assays that do not have measurements.
            </p>
        </div>
    </div>
    </div>
        <div id="mainFilterSection" class="filteringSection discloseBody">
        </div>  
    </div>

    {% if writable %}
        <div id="addMeasToAssay" title="Add Measurements to Selected Assays">
            <div class="sectionContent discloseBody measurement-create edd-form">
                {{ new_measurement.as_p }}
                <button type="submit" name="action" value="measurement">Add Measurement</button>
            </div>
        </div>
    {% endif %}
</form>

<div id="assayMain" class="off"
    title="Edit Assay">
    <form action="" method="POST">
    {% csrf_token %}
        <div class="sectionHead">
                <span class="discloseLink"><a href="#"></a></span>
        </div>
        <div class="sectionContent discloseBody assay-edit edd-form">
            {{ new_assay.as_p }}
            <button type="submit" name="action" value="assay">{% if new_assay.is_editing %}Edit Assay{% else %}Add Assay{% endif %}</button>
        </div>
    </form>
</div>


<form action="" style="display:none" method="POST">
    {% csrf_token %}
    <div class="pageSection">
        {# studyLinesTable will have checkboxes; name=lineId, value=pk #}
        <div class="scroll">
            <table id="studyLinesTable"></table>
        </div>
    </div>
</form>

{% endblock content %}