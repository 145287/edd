
{% load staticfiles %}

<!--

Template include file for displaying table of attachments and form elements to
add a new attachment. (The actual form is unspecified, since this may be
nested inside an existing form.)

-->

<div class="disclose discloseHide" id="attachments">
  <div class="sectionChapter">
    {% if attachments %}
    <a href="#" class="discloseLink">Attachments ({{ attachments|length }})</a>
    {% else %}
    <a href="#" class="discloseLink">Attachments</a>
    {% endif %}
  </div>
  <div class="discloseBody">
    <table cellpadding="0" cellspacing="0"
        class="dataTable sortable"
        id="attachmentsShow">
      <tr class="columnLabels">
        <th class="sortheader smaller" style="text-align:left" id="haFilename">
          <div>Filename</div>
        </th>
        <th class="sortheader smaller" style="text-align:left" id="haDesc">
          <div>Description</div>
        </th>
        <th class="sortheader smaller" style="text-align:right" id="haSize">
          <div>Size</div>
        </th>
        <th class="sortheader smaller" style="text-align:center" id="haCreator">
          <div class="nowrap">Added By</div>
        </th>
        <th class="sortheader smaller" style="text-align:left;border-right-width:0px" id="haTime">
          <div class="nowrap">Date Added</div>
        </th>
      </tr>
      {% for attachment in attachments %}
      <tr class="stripeRowA" data-line-id="20">
        <td class="popupcell" style="vertical-align:top">
          <div class="p">
            <div class="q">
              <div class="r" style="width:18px;">
                <img style="margin:0;padding:0px 1px 0px 0px;border:none;"
                     src="{% static 'main/images/' %}{{ attachment.icon }}"/>
              </div>
              <div class="r nowrap" style="vertical-align:middle">
                <a href="/download/{{ attachment.id }}">
                  {{ attachment.filename }}
                </a>
              </div>
              <div class="s">
                <div class="t">
                  <a href="{{ request.resolver_match.url_name }}?RemoveAttachment={{ attachment.id }}">Delete</a>
                </div>
              </div>
            </div>
          </div>
        </td>
        <td style="vertical-align:top">
          {{ attachment.description }}
        </td>
        <td style="text-align:right;vertical-align:top">
          {{ attachment.file_size|filesizeformat }}
        </td>
        <td style="text-align:center;vertical-align:top">
          {{ attachment.user_initials }}
        </td>
        <td style="vertical-align:top">
          {{ attachment.created.format_timestamp }}
        </td>
      </tr>
      {% endfor %}
    </table>
    <div id="attachmentActionPanel" class="sectionActions">
      <table class="formTable" cellspacing="0" cellpadding="0"
             style="margin:0px;">
        <tr>
          <td style="padding:4px 6px 0px 8px;">
            <input type="file"
                   name="newAttachmentContent"
                   id="newAttachmentContent" />
          </td>
          <td style="padding:4px 10px 5px 4px;">
            <span>Description:</span>
            <input  type="text"
                    size="55"
                    name="newAttachmentDescription"
                    id="newAttachmentDescription"/>
          </td>
          <td style="padding:4px 10px 5px 4px;">
            <input type="submit" id="attachFileButton" value="Attach File"/>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
